(function(l,e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(l.jQuery)}})(this,function(m){"use strict";var f=false;var d={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};d.scrolls.add=function(l){this.remove(l).push(l)};d.scrolls.remove=function(l){while(m.inArray(l,this)>=0){this.splice(m.inArray(l,this),1)}return this};var o={autoScrollSize:true,autoUpdate:true,debug:false,disableBodyScroll:false,duration:200,ignoreMobile:false,ignoreOverlay:false,scrollStep:30,showArrows:false,stepScrolling:true,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null};var l=function(l){if(!d.scroll){d.overlay=e();d.scroll=s();u();m(window).resize(function(){var l=false;if(d.scroll&&(d.scroll.height||d.scroll.width)){var e=s();if(e.height!==d.scroll.height||e.width!==d.scroll.width){d.scroll=e;l=true}}u(l)})}this.container=l;this.namespace=".scrollbar_"+d.data.index++;this.options=m.extend({},o,window.jQueryScrollbarOptions||{});this.scrollTo=null;this.scrollx={};this.scrolly={};l.data(d.data.name,this);d.scrolls.add(this)};l.prototype={destroy:function(){if(!this.wrapper){return}this.container.removeData(d.data.name);d.scrolls.remove(this);var l=this.container.scrollLeft();var e=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(l).scrollTop(e);this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace);this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace);this.wrapper.remove();m(document).add("body").off(this.namespace);if(m.isFunction(this.options.onDestroy)){this.options.onDestroy.apply(this,[this.container])}},init:function(l){var u=this,h=this.container,r=this.containerWrapper||h,p=this.namespace,v=m.extend(this.options,l||{}),b={x:this.scrollx,y:this.scrolly},s=this.wrapper;var e={scrollLeft:h.scrollLeft(),scrollTop:h.scrollTop()};if(d.mobile&&v.ignoreMobile||d.overlay&&v.ignoreOverlay||d.macosx&&!d.webkit){return false}if(!s){this.wrapper=s=m("<div>").addClass("scroll-wrapper").addClass(h.attr("class")).css("position",h.css("position")=="absolute"?"absolute":"relative").insertBefore(h).append(h);if(h.is("textarea")){this.containerWrapper=r=m("<div>").insertBefore(h).append(h);s.addClass("scroll-textarea")}r.addClass("scroll-content").css({height:"auto","margin-bottom":d.scroll.height*-1+"px","margin-right":d.scroll.width*-1+"px","max-height":""});h.on("scroll"+p,function(l){if(m.isFunction(v.onScroll)){v.onScroll.call(u,{maxScroll:b.y.maxScrollOffset,scroll:h.scrollTop(),size:b.y.size,visible:b.y.visible},{maxScroll:b.x.maxScrollOffset,scroll:h.scrollLeft(),size:b.x.size,visible:b.x.visible})}b.x.isVisible&&b.x.scroll.bar.css("left",h.scrollLeft()*b.x.kx+"px");b.y.isVisible&&b.y.scroll.bar.css("top",h.scrollTop()*b.y.kx+"px")});s.on("scroll"+p,function(){s.scrollTop(0).scrollLeft(0)});if(v.disableBodyScroll){var o=function(l){g(l)?b.y.isVisible&&b.y.mousewheel(l):b.x.isVisible&&b.x.mousewheel(l)};s.on("MozMousePixelScroll"+p,o);s.on("mousewheel"+p,o);if(d.mobile){s.on("touchstart"+p,function(l){var e=l.originalEvent.touches&&l.originalEvent.touches[0]||l;var s={pageX:e.pageX,pageY:e.pageY};var o={left:h.scrollLeft(),top:h.scrollTop()};m(document).on("touchmove"+p,function(l){var e=l.originalEvent.targetTouches&&l.originalEvent.targetTouches[0]||l;h.scrollLeft(o.left+s.pageX-e.pageX);h.scrollTop(o.top+s.pageY-e.pageY);l.preventDefault()});m(document).on("touchend"+p,function(){m(document).off(p)})})}}if(m.isFunction(v.onInit)){v.onInit.apply(this,[h])}}else{r.css({height:"auto","margin-bottom":d.scroll.height*-1+"px","margin-right":d.scroll.width*-1+"px","max-height":""})}m.each(b,function(r,i){var t=null;var n=1;var a=r==="x"?"scrollLeft":"scrollTop";var c=v.scrollStep;var f=function(){var l=h[a]();h[a](l+c);if(n==1&&l+c>=d)l=h[a]();if(n==-1&&l+c<=d)l=h[a]();if(h[a]()==l&&t){t()}};var d=0;if(!i.scroll){i.scroll=u._getScroll(v["scroll"+r]).addClass("scroll-"+r);if(v.showArrows){i.scroll.addClass("scroll-element_arrows_visible")}i.mousewheel=function(l){if(!i.isVisible||r==="x"&&g(l)){return true}if(r==="y"&&!g(l)){b.x.mousewheel(l);return true}var e=l.originalEvent.wheelDelta*-1||l.originalEvent.detail;var s=i.size-i.visible-i.offset;if(e>0&&d<s||e<0&&d>0){d=d+e;if(d<0)d=0;if(d>s)d=s;u.scrollTo=u.scrollTo||{};u.scrollTo[a]=d;setTimeout(function(){if(u.scrollTo){h.stop().animate(u.scrollTo,240,"linear",function(){d=h[a]()});u.scrollTo=null}},1)}l.preventDefault();return false};i.scroll.on("MozMousePixelScroll"+p,i.mousewheel).on("mousewheel"+p,i.mousewheel).on("mouseenter"+p,function(){d=h[a]()});i.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+p,function(l){if(l.which!=1)return true;n=1;var e={eventOffset:l[r==="x"?"pageX":"pageY"],maxScrollValue:i.size-i.visible-i.offset,scrollbarOffset:i.scroll.bar.offset()[r==="x"?"left":"top"],scrollbarSize:i.scroll.bar[r==="x"?"outerWidth":"outerHeight"]()};var s=0,o=0;if(m(this).hasClass("scroll-arrow")){n=m(this).hasClass("scroll-arrow_more")?1:-1;c=v.scrollStep*n;d=n>0?e.maxScrollValue:0}else{n=e.eventOffset>e.scrollbarOffset+e.scrollbarSize?1:e.eventOffset<e.scrollbarOffset?-1:0;c=Math.round(i.visible*.75)*n;d=e.eventOffset-e.scrollbarOffset-(v.stepScrolling?n==1?e.scrollbarSize:0:Math.round(e.scrollbarSize/2));d=h[a]()+d/i.kx}u.scrollTo=u.scrollTo||{};u.scrollTo[a]=v.stepScrolling?h[a]()+c:d;if(v.stepScrolling){t=function(){d=h[a]();clearInterval(o);clearTimeout(s);s=0;o=0};s=setTimeout(function(){o=setInterval(f,40)},v.duration+100)}setTimeout(function(){if(u.scrollTo){h.animate(u.scrollTo,v.duration);u.scrollTo=null}},1);return u._handleMouseDown(t,l)});i.scroll.bar.on("mousedown"+p,function(l){if(l.which!=1)return true;var s=l[r==="x"?"pageX":"pageY"];var o=h[a]();i.scroll.addClass("scroll-draggable");m(document).on("mousemove"+p,function(l){var e=parseInt((l[r==="x"?"pageX":"pageY"]-s)/i.kx,10);h[a](o+e)});return u._handleMouseDown(function(){i.scroll.removeClass("scroll-draggable");d=h[a]()},l)})}});m.each(b,function(l,e){var s="scroll-scroll"+l+"_visible";var o=l=="x"?b.y:b.x;e.scroll.removeClass(s);o.scroll.removeClass(s);r.removeClass(s)});m.each(b,function(l,e){m.extend(e,l=="x"?{offset:parseInt(h.css("left"),10)||0,size:h.prop("scrollWidth"),visible:s.width()}:{offset:parseInt(h.css("top"),10)||0,size:h.prop("scrollHeight"),visible:s.height()})});this._updateScroll("x",this.scrollx);this._updateScroll("y",this.scrolly);if(m.isFunction(v.onUpdate)){v.onUpdate.apply(this,[h])}m.each(b,function(l,e){var s=l==="x"?"left":"top";var o=l==="x"?"outerWidth":"outerHeight";var r=l==="x"?"width":"height";var i=parseInt(h.css(s),10)||0;var t=e.size;var n=e.visible+i;var a=e.scroll.size[o]()+(parseInt(e.scroll.size.css(s),10)||0);if(v.autoScrollSize){e.scrollbarSize=parseInt(a*n/t,10);e.scroll.bar.css(r,e.scrollbarSize+"px")}e.scrollbarSize=e.scroll.bar[o]();e.kx=(a-e.scrollbarSize)/(t-n)||1;e.maxScrollOffset=t-n});h.scrollLeft(e.scrollLeft).scrollTop(e.scrollTop).trigger("scroll")},_getScroll:function(l){var e={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};if(e[l]){l=e[l]}if(!l){l=e["simple"]}if(typeof l=="string"){l=m(l).appendTo(this.wrapper)}else{l=m(l)}m.extend(l,{bar:l.find(".scroll-bar"),size:l.find(".scroll-element_size"),track:l.find(".scroll-element_track")});return l},_handleMouseDown:function(l,e){var s=this.namespace;m(document).on("blur"+s,function(){m(document).add("body").off(s);l&&l()});m(document).on("dragstart"+s,function(l){l.preventDefault();return false});m(document).on("mouseup"+s,function(){m(document).add("body").off(s);l&&l()});m("body").on("selectstart"+s,function(l){l.preventDefault();return false});e&&e.preventDefault();return false},_updateScroll:function(l,e){var s=this.container,o=this.containerWrapper||s,r="scroll-scroll"+l+"_visible",i=l==="x"?this.scrolly:this.scrollx,t=parseInt(this.container.css(l==="x"?"left":"top"),10)||0,n=this.wrapper;var a=e.size;var c=e.visible+t;e.isVisible=a-c>1;if(e.isVisible){e.scroll.addClass(r);i.scroll.addClass(r);o.addClass(r)}else{e.scroll.removeClass(r);i.scroll.removeClass(r);o.removeClass(r)}if(l==="y"){if(s.is("textarea")||a<c){o.css({height:c+d.scroll.height+"px","max-height":"none"})}else{o.css({"max-height":c+d.scroll.height+"px"})}}if(e.size!=s.prop("scrollWidth")||i.size!=s.prop("scrollHeight")||e.visible!=n.width()||i.visible!=n.height()||e.offset!=(parseInt(s.css("left"),10)||0)||i.offset!=(parseInt(s.css("top"),10)||0)){m.extend(this.scrollx,{offset:parseInt(s.css("left"),10)||0,size:s.prop("scrollWidth"),visible:n.width()});m.extend(this.scrolly,{offset:parseInt(s.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:n.height()});this._updateScroll(l==="x"?"y":"x",i)}}};var r=l;m.fn.scrollbar=function(s,o){if(typeof s!=="string"){o=s;s="init"}if(typeof o==="undefined"){o=[]}if(!m.isArray(o)){o=[o]}this.not("body, .scroll-wrapper").each(function(){var l=m(this),e=l.data(d.data.name);if(e||s==="init"){if(!e){e=new r(l)}if(e[s]){e[s].apply(e,o)}}});return this};m.fn.scrollbar.options=o;var u=function(){var a=0,c=0;return function(l){var e,s,o,r,i,t,n;for(e=0;e<d.scrolls.length;e++){r=d.scrolls[e];s=r.container;o=r.options;i=r.wrapper;t=r.scrollx;n=r.scrolly;if(l||o.autoUpdate&&i&&i.is(":visible")&&(s.prop("scrollWidth")!=t.size||s.prop("scrollHeight")!=n.size||i.width()!=t.visible||i.height()!=n.visible)){r.init();if(o.debug){window.console&&console.log({scrollHeight:s.prop("scrollHeight")+":"+r.scrolly.size,scrollWidth:s.prop("scrollWidth")+":"+r.scrollx.size,visibleHeight:i.height()+":"+r.scrolly.visible,visibleWidth:i.width()+":"+r.scrollx.visible},true);c++}}}if(f&&c>10){window.console&&console.log("Scroll updates exceed 10");u=function(){}}else{clearTimeout(a);a=setTimeout(u,300)}}}();function s(l){if(d.webkit&&!l){return{height:0,width:0}}if(!d.data.outer){var e={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};d.data.inner=m("<div>").css(m.extend({},e));d.data.outer=m("<div>").css(m.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},e)).append(d.data.inner).appendTo("body")}d.data.outer.scrollLeft(1e3).scrollTop(1e3);return{height:Math.ceil(d.data.outer.offset().top-d.data.inner.offset().top||0),width:Math.ceil(d.data.outer.offset().left-d.data.inner.offset().left||0)}}function e(){var l=s(true);return!(l.height||l.width)}function g(l){var e=l.originalEvent;if(e.axis&&e.axis===e.HORIZONTAL_AXIS)return false;if(e.wheelDeltaX)return false;return true}if(window.angular){(function(s){s.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=o;return{setOptions:function(l){s.extend(e,l)},$get:function(){return{options:s.copy(e)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(i,t){return{restrict:"AC",link:function(l,e,s){var o=t(s.jqueryScrollbar),r=o(l);e.scrollbar(r||i.options).on("$destroy",function(){e.scrollbar("destroy")})}}}])})(window.angular)}});